# 清理测试/开发环境配置

运行 `npm run dev` 时，应用使用**独立的数据目录**，与正式环境（打包后的 `.project4`）分开，避免污染正式数据。

## 测试环境数据位置

| 内容       | 路径（macOS/Linux）                    |
|------------|----------------------------------------|
| 根目录     | `~/.project4-dev`                      |
| 配置文件   | `~/.project4-dev/config.json`          |
| 空间数据   | `~/.project4-dev/spaces/`              |
| 临时数据   | `~/.project4-dev/temp/`                |

若设置了环境变量 `PROJECT4_DATA_DIR`，则以上路径以该变量为准。

---

## 方式一：只清空配置（保留空间/对话）

只删除或重置 **API Key、MCP、技能等配置**，空间和对话记录保留。

```bash
# 删除配置文件（下次启动会按默认重新生成）
rm ~/.project4-dev/config.json
```

或手动编辑 `~/.project4-dev/config.json`，把 `aiSources.custom.apiKey`、`api.apiKey` 等清空或改成新值。

---

## 方式二：彻底清理测试环境（推荐）

删除整个测试数据目录，相当于**全新测试环境**：配置、空间、对话、缓存全部清空。

```bash
# 先退出正在运行的 npm run dev，再执行：
rm -rf ~/.project4-dev
```

下次运行 `npm run dev` 时会自动创建新的 `~/.project4-dev` 和默认 `config.json`，需要重新配置 API Key 和添加空间。

---

## 方式三：只清空某个空间里的对话

若只想清空某个目录下的对话，保留配置和其他空间：

- 该空间在 **默认目录** `~/.project4-dev/spaces/<空间名>/` 下：  
  删除对应文件夹，或只删其中的 `空间名/.project4/conversations/`。
- 该空间是 **自定义路径**（例如 `/Users/xxx/Desktop/oa/222`）：  
  只删该路径下的 `.project4` 目录，例如：  
  `rm -rf /Users/xxx/Desktop/oa/222/.project4`

---

## 小结

| 目的               | 操作                                      |
|--------------------|-------------------------------------------|
| 只换 API Key/配置  | 删 `~/.project4-dev/config.json` 或编辑   |
| 完全重置测试环境   | `rm -rf ~/.project4-dev`                  |
| 只清某空间对话     | 删该空间下的 `.project4` 或对应 space 目录 |
